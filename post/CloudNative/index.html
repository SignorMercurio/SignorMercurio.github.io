<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>äº‘åŸç”ŸæŠ€æœ¯åŸç† - Lab on Mercury</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Lab on Mercury"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Lab on Mercury"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="ç²¾å¯†è€Œå¤æ‚ã€‚"><meta property="og:type" content="blog"><meta property="og:title" content="äº‘åŸç”ŸæŠ€æœ¯åŸç†"><meta property="og:url" content="https://signormercurio.me/post/CloudNative/"><meta property="og:site_name" content="Lab on Mercury"><meta property="og:description" content="ç²¾å¯†è€Œå¤æ‚ã€‚"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://i.loli.net/2021/10/10/OALUSKQhd8MjBi9.png"><meta property="article:published_time" content="2021-09-10T08:27:59.000Z"><meta property="article:author" content="Mercury"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Serverless"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Service Mesh"><meta property="article:tag" content="ARM"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://i.loli.net/2021/10/10/OALUSKQhd8MjBi9.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://signormercurio.me/post/CloudNative/"},"headline":"Lab on Mercury","image":["https://i.loli.net/2021/10/10/OALUSKQhd8MjBi9.png"],"datePublished":"2021-09-10T08:27:59.000Z","author":{"@type":"Person","name":"Mercury"},"description":"ç²¾å¯†è€Œå¤æ‚ã€‚"}</script><link rel="canonical" href="https://signormercurio.me/post/CloudNative/"><link rel="alternate" href="/atom.xml" title="Lab on Mercury" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.png" alt="Lab on Mercury" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://i.loli.net/2021/10/10/OALUSKQhd8MjBi9.png" alt="äº‘åŸç”ŸæŠ€æœ¯åŸç†"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-09-10T08:27:59.000Z" title="2021-09-10T08:27:59.000Z">2021-09-10</time></span><span class="level-item"><a class="link-muted" href="/categories/%E4%BA%91/">äº‘</a></span><span class="level-item">27 minutes read (About 4019 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">äº‘åŸç”ŸæŠ€æœ¯åŸç†</h1><div class="content"><p>ç²¾å¯†è€Œå¤æ‚ã€‚</p>
<a id="more"></a>

<h1 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h1><h2 id="Namespace"><a href="#Namespace" class="headerlink" title="Namespace"></a>Namespace</h2><p>Linux é‡‡ç”¨ Namespace æŠ€æœ¯è¿›è¡Œèµ„æºéš”ç¦»ï¼Œå¯ä»¥ä¸ºä¸åŒè¿›ç¨‹åˆ†é…ä¸åŒçš„ Namespaceï¼Œæœ‰ç‚¹ç±»ä¼¼æ²™ç®±çš„æ¦‚å¿µã€‚åœ¨ Linux è¿›ç¨‹çš„æ•°æ®ç»“æ„ä¸­ï¼Œ<code>nsproxy</code> ç»“æ„ä½“è´Ÿè´£ç®¡ç† Namespaceï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nsproxy</span> &#123;</span></span><br><span class="line">  <span class="keyword">atomic_t</span>             count;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">uts_namespace</span> *<span class="title">uts_ns</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">ipc_namespace</span> *<span class="title">ipc_ns</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mnt_namespace</span> *<span class="title">mnt_ns</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">pid_namespace</span> *<span class="title">pid_ns_for_children</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">net</span>           *<span class="title">net_ns</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹çˆ¶å­è¿›ç¨‹å…±äº« Namespaceï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ <code>clone</code>ã€<code>setns</code>ã€<code>unshare</code> ç­‰æ–¹æ³•æ‰‹åŠ¨æŒ‡å®šå’Œä¿®æ”¹ Namespaceã€‚</p>
<p>ä»¥ä¸Šé¢ç»“æ„ä½“çš„ <code>pid_namespace</code> ä¸ºä¾‹ï¼Œä¸¤ä¸ªä¸åŒçš„ PID Namespace ä¸‹çš„è¿›ç¨‹ä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ã€‚ç±»ä¼¼çš„ï¼Œç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿã€ç”¨æˆ·ã€æŒ‚è½½ç‚¹ç­‰çš„ Namespace ä¹‹é—´ä¹ŸåŒç†ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒDocker å®é™…ä¸Šå°±æ˜¯å¯¹ Namespace çš„ä¸€æ¬¡å°è£…ï¼Œå› æ­¤åœ¨å®¿ä¸»æœºä¸Šè°ƒè¯• Docker å†…éƒ¨ç¨‹åºæ—¶ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© Namespace çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å…ˆè·å–å¯¹åº”å®¹å™¨çš„ PIDï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [docker id] | grep pid</span><br></pre></td></tr></table></figure>

<p>å†ç”¨ <code>nsenter</code> è¿›å…¥å¯¹åº”çš„ Namespaceï¼Œä¾‹å¦‚è¿›å…¥ç½‘ç»œ Namespace ä½¿ç”¨ <code>-n</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsenter -t [pid] -n [cmd]</span><br></pre></td></tr></table></figure>

<h2 id="Cgroups"><a href="#Cgroups" class="headerlink" title="Cgroups"></a>Cgroups</h2><p>Cgroups å¯¹è¿›ç¨‹ä½¿ç”¨çš„è®¡ç®—èµ„æºè¿›è¡Œç®¡æ§ï¼Œå¯¹ä¸åŒç±»å‹çš„èµ„æºé‡‡ç”¨ä¸åŒå­ç³»ç»Ÿï¼Œå¹¶åœ¨å­ç³»ç»Ÿä¸­é‡‡ç”¨å±‚çº§æ ‘ç»“æ„ï¼ˆ<code>/sys/fs/cgroup</code>ï¼‰ã€‚</p>
<h3 id="ğŸŒ°-é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„-CPU-èµ„æº"><a href="#ğŸŒ°-é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„-CPU-èµ„æº" class="headerlink" title="ğŸŒ° é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„ CPU èµ„æº"></a>ğŸŒ° é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„ CPU èµ„æº</h3><p>é¦–å…ˆè¿›å…¥ cpu å­ç³»ç»Ÿï¼Œå°†è¿›ç¨‹åŠ å…¥ cgroupï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /sys/fs/cgroup/cpu</span><br><span class="line"><span class="built_in">echo</span> [pid] &gt; cgroup.procs</span><br></pre></td></tr></table></figure>

<p>éšåå…³æ³¨ <code>cpu.cfs_quota_us</code> å’Œ <code>cpu.cfs_period_us</code>ï¼Œä¸¤è€…çš„æ¯”å€¼å³è¿›ç¨‹èƒ½å ç”¨ CPU èµ„æºçš„æœ€é«˜æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º <code>-1</code>ï¼ˆæ— é™åˆ¶ï¼‰ å’Œ <code>100000</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®¾ç½®æœ€å¤šå ç”¨ 25% CPU èµ„æºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 25000 &gt; cpu.cfs_quota_us</span><br></pre></td></tr></table></figure>

<h2 id="UnionFS"><a href="#UnionFS" class="headerlink" title="UnionFS"></a>UnionFS</h2><p>é¡¾åæ€ä¹‰ï¼ŒUnionFS å¯ä»¥å¯¹æ–‡ä»¶ç³»ç»Ÿ â€œå–å¹¶é›†â€ï¼Œä¹Ÿå°±æ˜¯å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ã€‚</p>
<p>ç»å…¸çš„ Linux ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ bootfs ä¸­çš„ BootLoader å¼•å¯¼åŠ è½½ Kernel åˆ°å†…å­˜ä¸­ï¼Œç„¶å <code>umount</code> æ‰ bootfsã€‚Kernel åŠ è½½å®Œæˆåï¼Œå°±ä¼šä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ rootfs æ–‡ä»¶ç³»ç»Ÿã€‚å¯åŠ¨æ—¶å…ˆå°† rootfs è®¾ä¸º readonly è¿›è¡Œæ£€æŸ¥ï¼Œéšåå†è®¾ä¸º readwrite ä¾›ä½¿ç”¨ã€‚</p>
<p>è€Œåœ¨ Docker å¯åŠ¨æ—¶ï¼Œæ£€æŸ¥å®Œ readonly çš„ rootfs åä¼šå† union mount ä¸€ä¸ª readwrite çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç§°ä¸ºä¸€ä¸ª FS å±‚ã€‚åç»­ä¼šç»§ç»­æ·»åŠ  readwrite çš„ FS å±‚ï¼Œæ¯æ¬¡æ·»åŠ æ—¶å°†å½“å‰æœ€é¡¶å±‚çš„ FS å±‚è®¾ä¸º readonlyã€‚è¿™å®é™…ä¸Šå°±æ˜¯ <code>docker build</code> æ ¹æ® Dockerfile ä¸­æ¯ä¸€è¡Œçš„æŒ‡ä»¤å †å  FS å±‚çš„è¿‡ç¨‹ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœè¦ä¿®æ”¹ä¸‹å±‚ readonly FS å±‚çš„æ–‡ä»¶æ€ä¹ˆåŠå‘¢ï¼Ÿåªéœ€è¦ Copy-on-Writeï¼Œå°†æ–‡ä»¶å¤åˆ¶åˆ°å¯å†™çš„é¡¶å±‚å¹¶ä¿®æ”¹å³å¯ã€‚è¿™æ ·èƒ½æˆåŠŸæ˜¯å› ä¸º Docker é‡‡ç”¨çš„ OverlayFS åœ¨åˆå¹¶ä¸Šä¸‹å±‚åŒåæ–‡ä»¶æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©ä¸Šå±‚æ–‡ä»¶ã€‚</p>
<p>æœ€åï¼ŒFS å±‚å¯ä»¥åœ¨ä¸åŒé•œåƒä¹‹é—´å¤ç”¨ï¼ŒèŠ‚çœé•œåƒæ„å»ºæ—¶é—´å’Œç¡¬ç›˜å ç”¨ã€‚</p>
<h1 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h1><h2 id="FaaS"><a href="#FaaS" class="headerlink" title="FaaS"></a>FaaS</h2><p>Serverless å¹¶ä¸æ˜¯æŒ‡ä¸éœ€è¦æœåŠ¡å™¨ï¼Œè€Œæ˜¯æŒ‡å¯¹æœåŠ¡å™¨è¿ç»´çš„æç«¯æŠ½è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç¨‹åºè®¾è®¡é¢†åŸŸå‘ç”Ÿçš„æŠ½è±¡ï¼Œéƒ½æ˜¯ä¸ºäº†é™ä½å¼€å‘éš¾åº¦å’Œæˆæœ¬ã€è®©å¼€å‘è€…æ›´ä¸“æ³¨äºçœŸæ­£æœ‰ä»·å€¼çš„å·¥ä½œã€‚å› æ­¤ï¼ŒServerless ä¸»è¦æ˜¯é’ˆå¯¹åç«¯è¿ç»´è¿›è¡Œçš„ä¸€ç§ä¼˜åŒ–ã€‚</p>
<p>Serverless é¦–å…ˆæå‡ºçš„æ¦‚å¿µæ˜¯å‡½æ•°å³æœåŠ¡ FaaSï¼Œå¤§ä½“å¯ä»¥åˆ†æˆå‡½æ•°ä»£ç ã€å‡½æ•°æœåŠ¡ã€è§¦å‘å™¨ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<ul>
<li>è§¦å‘å™¨æ¥æ”¶ç”¨æˆ·è¯·æ±‚å¹¶é€šçŸ¥å‡½æ•°æœåŠ¡ã€‚å®é™…ä¸Šæ˜¯å¯¹è´Ÿè½½å‡è¡¡ã€åå‘ä»£ç†ç­‰ä¸­é—´ä»¶å·¥ä½œçš„æŠ½è±¡</li>
<li>å‡½æ•°æœåŠ¡æ”¶åˆ°æ¶ˆæ¯åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„å‡½æ•°å®ä¾‹ï¼Œæ²¡æœ‰åˆ™é€šè¿‡å‡½æ•°ä»£ç æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å‡½æ•°å®ä¾‹ï¼›æœ€åå°†ç”¨æˆ·è¯·æ±‚ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæ‰§è¡Œå‡½æ•°ï¼Œè¿”å›çš„ç»“æœå°†åŸè·¯è¿”å›ã€‚å®é™…ä¸Šæ˜¯å¯¹ä»£ç è¿è¡Œç¯å¢ƒçš„æŠ½è±¡</li>
<li>å‡½æ•°ä»£ç ä¸€èˆ¬åœ¨ git ä¹‹ç±»çš„ç‰ˆæœ¬æ§åˆ¶ä»“åº“ã€‚å®é™…ä¸Šæ˜¯å¯¹ä»£ç ä¸Šä¼ å’Œéƒ¨ç½²çš„æŠ½è±¡</li>
</ul>
<h3 id="å¼¹æ€§ä¼¸ç¼©"><a href="#å¼¹æ€§ä¼¸ç¼©" class="headerlink" title="å¼¹æ€§ä¼¸ç¼©"></a>å¼¹æ€§ä¼¸ç¼©</h3><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒFaaS èƒ½æ ¹æ®ç›®å‰è´Ÿè½½å¯¹å ç”¨èµ„æºè¿›è¡Œå¼¹æ€§ä¼¸ç¼©ï¼Œæ— è´Ÿè½½æ—¶ç”šè‡³å¯ä»¥ä¸å ç”¨èµ„æºã€‚è¿™èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šæå‡èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<h3 id="å†·å¯åŠ¨"><a href="#å†·å¯åŠ¨" class="headerlink" title="å†·å¯åŠ¨"></a>å†·å¯åŠ¨</h3><p>å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨ç›¸åï¼Œä»ä¸€ä¸ªæœªåˆå§‹åŒ–çš„æœåŠ¡å¼€å§‹ï¼Œç›´åˆ°å‡½æ•°å®ä¾‹æ‰§è¡Œå®Œæ¯•ç»“æŸã€‚ç”±äºå¯èƒ½æ¶‰åŠæ¯”è¾ƒç¹ççš„åˆå§‹åŒ–å·¥ä½œï¼Œä¼ ç»ŸæœåŠ¡ä¹Ÿè®¸èƒ½å¤Ÿåœ¨çƒ­å¯åŠ¨ä¸Šè¾¾åˆ°å¾ˆå¿«çš„é€Ÿåº¦ï¼Œä½†åœ¨å†·å¯åŠ¨ä¸Šä¸è¡Œã€‚</p>
<p>FaaS åˆ™é€šè¿‡å®¹å™¨ã€è¿è¡Œç¯å¢ƒã€ä»£ç ä¸‰è€…åˆ†å±‚å¹¶åˆ†åˆ«ç¼“å­˜ï¼Œè·å¾—äº†è¾ƒå¿«çš„å†·å¯åŠ¨é€Ÿåº¦ï¼Œä¸€èˆ¬å¤§çº¦åœ¨å‡ ç™¾æ¯«ç§’å†…ã€‚æ˜¾ç„¶ï¼Œè¿™æ˜¯ç‰ºç‰²äº†ç”¨æˆ·å¯¹åº•å±‚ç¯å¢ƒçš„å¯æ§æ€§æ¢æ¥çš„ã€‚</p>
<h3 id="è¯­è¨€æ— å…³æ€§"><a href="#è¯­è¨€æ— å…³æ€§" class="headerlink" title="è¯­è¨€æ— å…³æ€§"></a>è¯­è¨€æ— å…³æ€§</h3><p>FaaS å¯ä»¥æ›¿æ¢ä¼ ç»Ÿå‰åç«¯åˆ†ç¦»å¼€å‘ä¸­çš„åç«¯æœåŠ¡ã€å¯ä»¥ç”¨æ¥è¯·æ±‚å…¬å¼€çš„ Web APIã€æ›´é‡è¦çš„æ˜¯å¯ä»¥å’Œå…¶ä»–äº‘æœåŠ¡å•†æä¾›çš„æœåŠ¡è¿›è¡Œè”åŠ¨ã€‚ç”±äºå‰ç«¯åªåœ¨æ„æœ€åè¿”å›çš„æ•°æ®ï¼Œæˆ‘ä»¬çš„å‡½æ•°æœåŠ¡å®Œå…¨å¯ä»¥æ··åˆé‡‡ç”¨å¤šç§ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™ï¼Œä»¥é€‚åº”ä¸åŒçš„éœ€æ±‚ã€‚</p>
<h3 id="æ•°æ®åº“ï¼Ÿ"><a href="#æ•°æ®åº“ï¼Ÿ" class="headerlink" title="æ•°æ®åº“ï¼Ÿ"></a>æ•°æ®åº“ï¼Ÿ</h3><p>FaaS ä¸­çš„å‡½æ•°å®ä¾‹éƒ½æ´»ä¸äº†å¤ªä¹…ï¼Œæœ‰çš„æ‰§è¡Œå®Œå°±è¢«é”€æ¯äº†ï¼Œè€Œæœ‰çš„å¯èƒ½èƒ½åœ¨å†…å­˜ä¸­å¤šå¾…ä¸€ä¼šå„¿ï¼Œä½†äº‘æœåŠ¡å•†ç»è¿‡ä¸€å°æ®µæ—¶é—´åä»ä¼šé”€æ¯å®ƒä»¬ï¼Œè¿™æ˜¯å› ä¸º FaaS éœ€è¦å¼¹æ€§ä¼¸ç¼©ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯æ— çŠ¶æ€çš„å‡½æ•°ï¼ˆå°±åƒ HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ä¸€æ ·ï¼‰ã€‚</p>
<p>è¿™å°±ç»™æ•°æ®æŒä¹…åŒ–å¸¦æ¥äº†é—®é¢˜ï¼Œæ¯”å¦‚æ•°æ®åº“å°±ä¸èƒ½æ”¾åœ¨ FaaS çš„ä¸»è¿›ç¨‹ä¸­ã€‚ä½†æŠŠæ•°æ®åº“å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå†é€šè¿‡ä¸€ä¸ªè¿›ç¨‹å»è¿æ¥å¹¶è®¿é—®å®ƒï¼Œè¿™æ ·åˆä¼šæ˜¾è‘—å¢åŠ å†·å¯åŠ¨çš„æ—¶é—´ã€‚</p>
<p>è§£å†³åŠæ³•å°±æ˜¯ä¸å†è¿æ¥æ•°æ®åº“ï¼Œè€Œæ˜¯é€šè¿‡ RESTful API è®¿é—®æ•°æ®åº“ã€‚è¿™é‡Œçš„ RESTful API å®é™…ä¸Šå°±æ˜¯ä¸€ç§åç«¯å³æœåŠ¡ BaaS äº†ï¼Œå®ƒæä¾›äº†è®¿é—®åç«¯æ•°æ®åº“çš„æ¥å£ï¼Œä½¿å¾— FaaS ä¸å†éœ€è¦è€ƒè™‘æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜ã€‚</p>
<h2 id="BaaS"><a href="#BaaS" class="headerlink" title="BaaS"></a>BaaS</h2><p>åç«¯ BaaS åŒ–ä¸ºäº†é™ä½è¿ç»´æˆæœ¬ï¼Œå¾€å¾€ä¼šå°†å¤æ‚ä¸šåŠ¡é€»è¾‘æ‹†åˆ†æˆå•ä¸€èŒè´£çš„å¾®æœåŠ¡ï¼Œå½¢æˆå¾®æœåŠ¡æ¶æ„ã€‚è¿™å°±è¦æ±‚å„å¾®æœåŠ¡ä¹‹é—´ç›¸å¯¹ç‹¬ç«‹ï¼Œæ„å‘³ç€æ¯ä¸ªæœåŠ¡çš„æ•°æ®åº“ä¹Ÿéœ€è¦è§£è€¦åˆã€‚å¯¹è¿™ç±»åˆ†å¸ƒå¼æ•°æ®åº“è€Œè¨€ï¼Œæœ€é‡è¦çš„å°±æ˜¯è§£å†³æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¾‹å¦‚é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æˆ–æ˜¯ Raft åè®®ç­‰ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒFaaS å’Œ BaaS çš„åº•å±‚å®é™…ä¸Šä½¿ç”¨å®¹å™¨æŠ€æœ¯å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°ç”¨ Kubernetes æ­å»ºè‡ªå·±çš„ Serverless å¹³å°ï¼ˆè§åæ–‡ Kubernetes éƒ¨åˆ†ï¼‰ã€‚</p>
<h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul>
<li>æŠ€æœ¯å°šä¸æˆç†Ÿï¼Œè®¸å¤šäº‘æœåŠ¡å•†æä¾›çš„ Serverless æœåŠ¡å­˜åœ¨ä¸å°‘ bug</li>
<li>Serverless å¹³å°å¯¹å¼€å‘è€…æ¥è¯´æ˜¯ä¸ªé»‘ç›’å­ï¼Œæƒ³åœ¨ä¸Šé¢è°ƒè¯•ä»£ç ã€æ’æŸ¥é—®é¢˜ï¼Œéœ€è¦ä»˜å‡ºæå¤§æˆæœ¬</li>
<li>åŒç†ï¼ŒServerless å¹³å°ä¸Šçš„è¿è¡Œæ—¶ç¯å¢ƒåªæ”¯æŒéƒ¨åˆ†å®šåˆ¶</li>
<li>æ¯æ¬¡éƒ¨ç½²ä»£ç éƒ½éœ€è¦å‹ç¼©ä»£ç åä¸Šä¼ ï¼Œè¾ƒç¹ç</li>
<li>äº‘æœåŠ¡å•†æä¾›çš„ç”Ÿæ€ï¼ˆå¦‚ä»£ç è°ƒè¯•å·¥å…·ï¼‰éƒ½æ˜¯å°é—­çš„ï¼Œå½¢æˆ Vendor-lockï¼›è¿™ä¸€ç‚¹å¯èƒ½å¯ä»¥é€šè¿‡ Serverlessã€Midway FaaS ç­‰æ¡†æ¶è§£å†³</li>
</ul>
<h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h1><h2 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h2><p>K8s ç”¨æ¥ç®¡ç†å®¹å™¨é›†ç¾¤ï¼Œå®ƒçš„å¥½å¤„åœ¨ <a target="_blank" rel="noopener" href="https://kubernetes.io/zh/docs/concepts/overview/what-is-kubernetes/#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-kubernetes-%E5%AE%83%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88">å®˜æ–¹æ–‡æ¡£</a> é‡Œå·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ï¼Œè€Œå®ƒçš„åŸç†å¤§è‡´å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€å¼ æ¶æ„å›¾ï¼š</p>
<p><img src="https://i.loli.net/2021/09/12/WmH9yCfIrOEYpcL.png" alt="å›¾ 1 K8s æ¶æ„"></p>
<p>é€šè¿‡ CLI å·¥å…· kubectlï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°è¿è¡Œåœ¨ K8s Master Node ä¸Šçš„ API Serverï¼Œä¹Ÿæ˜¯æ•´ä¸ªé›†ç¾¤çš„æ ¸å¿ƒã€‚Node å®é™…ä¸Šæ˜¯å¯¹è®¡ç®—èµ„æºçš„ä¸€ç§æŠ½è±¡ï¼Œæ¯ä¸ª Node ä¸Šè¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª Podï¼Œå³åº”ç”¨å®ä¾‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ª Pod ä¸Šæ¨èè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚</p>
<p>åœ¨ Master Node ä¸Šè¿˜æœ‰é”®å€¼æ•°æ®åº“ etcdã€ç›‘è§† Pod çš„è°ƒåº¦å™¨ Schedulerã€ä¸åŒç±»å‹çš„æ§åˆ¶å™¨ Controller Manager ä»¥åŠè¿æ¥äº‘æœåŠ¡å‚å•† API çš„ Cloud Controller Managerã€‚</p>
<p>è€Œåœ¨æ™®é€š Node ä¸Šåˆ™è¿è¡Œäº†ä¸€ä¸ª kubeletï¼Œè´Ÿè´£é€šçŸ¥ API Server å®¹å™¨è¿è¡ŒçŠ¶æ€ã€‚æ­¤å¤–ï¼Œä¸ºäº†è®©å¤–ç•Œèƒ½å¤Ÿè®¿é—®åˆ°å®¹å™¨è¿è¡Œçš„æœåŠ¡ï¼Œéœ€è¦ç”¨ K8s Service é€šè¿‡ kube-proxy æš´éœ²è¯¥æœåŠ¡ã€‚</p>
<p>æœ€åï¼Œä¸åŒçš„ K8s é›†ç¾¤ä¹‹é—´é€šè¿‡ Namespace éš”ç¦»ï¼Œæ³¨æ„è¿™å’Œä¸Šæ–‡å†™å®¹å™¨æŠ€æœ¯æ—¶æåˆ°çš„ Linux Namespace å¹¶éåŒä¸€æ¦‚å¿µï¼Œå°½ç®¡æ€æƒ³æ˜¯ç›¸ä¼¼çš„ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>K8s çš„å®‰è£…ä»¤äººæƒŠè®¶åœ°ç®€å•ã€‚å°±åƒæˆ‘ä»¬åœ¨æ¶æ„å›¾ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œå®‰è£… K8s ä¸»è¦åˆ†ä¸ºå®‰è£… kubectl å’Œ å®‰è£… K8s é›†ç¾¤ä¸¤ä¸ªæ­¥éª¤ã€‚</p>
<h3 id="å®‰è£…-K8s-é›†ç¾¤"><a href="#å®‰è£…-K8s-é›†ç¾¤" class="headerlink" title="å®‰è£… K8s é›†ç¾¤"></a>å®‰è£… K8s é›†ç¾¤</h3><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ Docker Desktop å®‰è£…ã€‚å®é™…ä¸Š Docker Desktop è‡ªå¸¦äº† K8sï¼ˆä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä½†ä¹Ÿæ¯”è¾ƒæ–°ï¼‰ï¼Œåœ¨è®¾ç½®é‡Œå‹¾é€‰å³å¯ã€‚</p>
<p>ç¬¬äºŒç§æ–¹å¼æ˜¯é€šè¿‡ kubeadmã€minikubeã€kind ç­‰å·¥å…·å®‰è£…ï¼Œæ— è®ºå“ªç§æ–¹å¼éƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä»¥ minikube ä¸ºä¾‹ã€‚</p>
<blockquote>
<p>minikube å†…ç½®äº† kubectlï¼Œæ‰€ä»¥ä¹‹åå¯ä»¥é€‰æ‹©ä¸å¦å¤–å®‰è£… kubectlã€‚</p>
</blockquote>
<p>æŒ‰ç…§ <a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/docs/start/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œç›´æ¥ <code>install</code> äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64</span><br><span class="line">sudo install minikube-darwin-amd64 /usr/<span class="built_in">local</span>/bin/minikube</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…-kubectl"><a href="#å®‰è£…-kubectl" class="headerlink" title="å®‰è£… kubectl"></a>å®‰è£… kubectl</h3><p><code>brew install kubectl</code>ï¼Œæ²¡äº†ã€‚</p>
<p>ç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œkubectl ç‰ˆæœ¬å’Œ K8s é›†ç¾¤ç‰ˆæœ¬ä¹‹é—´ç›¸å·®ä¸èƒ½è¶…è¿‡ <em>0.0.2</em>ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨ Docker Desktop å®‰è£…çš„ 1.21.4 ç‰ˆæœ¬çš„é›†ç¾¤ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -LO <span class="string">&quot;https://dl.k8s.io/release/v1.21.4/bin/darwin/arm64/kubectl&quot;</span></span><br><span class="line">chmod +x ./kubectl</span><br><span class="line">sudo mv ./kubectl /usr/<span class="built_in">local</span>/bin/kubectl</span><br><span class="line">sudo chown root: /usr/<span class="built_in">local</span>/bin/kubectl</span><br></pre></td></tr></table></figure>

<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>é¦–å…ˆè®¾ç½®å¥½åˆ«åï¼Œæ–¹ä¾¿åç»­æ“ä½œï¼ˆè¿™é‡Œç›´æ¥ä½¿ç”¨äº† minikube å†…ç½®çš„ kubectlï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> k=<span class="string">&quot;minikube kubectl --&quot;</span></span><br><span class="line"><span class="built_in">alias</span> dps=<span class="string">&quot;docker ps -a&quot;</span></span><br><span class="line"><span class="built_in">alias</span> dr=<span class="string">&quot;docker rm -f&quot;</span></span><br><span class="line"><span class="built_in">alias</span> dil=<span class="string">&quot;docker image ls&quot;</span></span><br><span class="line"><span class="built_in">alias</span> dir=<span class="string">&quot;docker image rm&quot;</span></span><br><span class="line"><span class="built_in">alias</span> ds=<span class="string">&quot;docker start&quot;</span></span><br><span class="line"><span class="built_in">alias</span> dx=<span class="string">&quot;docker exec -it&quot;</span></span><br><span class="line"><span class="built_in">alias</span> mk=<span class="string">&quot;minikube&quot;</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ minikubeï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mk start</span><br></pre></td></tr></table></figure>

<p>éƒ¨ç½²åº”ç”¨å¹¶æ£€æŸ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">k create deploy echo-server --image=k8s.gcr.io/echoserver-arm:1.8</span><br><span class="line">k get deploy</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME          READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">echo-server   1/1     1            1           1m</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæ˜¯ M1 èŠ¯ç‰‡ï¼Œæ‰€ä»¥ç”¨çš„ ARM é•œåƒã€‚</p>
<p>æ£€æŸ¥ Pod æƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">k get po</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">echo-server-9f4db688c-r288r   1/1     Running   0          89</span><br></pre></td></tr></table></figure>

<p>æš´éœ²æœåŠ¡å¹¶æ£€æŸ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">k expose deploy echo-server --<span class="built_in">type</span>=LoadBalancer --port=8080</span><br><span class="line">k get svc</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME          TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">echo-server   LoadBalancer   10.111.217.237   &lt;pending&gt;     8080:31389/TCP   1m</span><br><span class="line">kubernetes    ClusterIP      10.96.0.1        &lt;none&gt;        443/TCP          100m</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæš´éœ²äº†ä¸€ä¸ª LoadBalancer ç±»å‹çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ¢æˆ NodePort ç±»å‹æœåŠ¡ã€‚8080 æ˜¯æˆ‘ä»¬çš„ echoserver å®¹å™¨å†…çš„æœåŠ¡ç«¯å£ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯ä»¥å‘ç°è¿˜æœ‰ä¸€ä¸ª <code>kubernetes</code> æœåŠ¡ï¼Œè¿™å°±æ˜¯ K8s é›†ç¾¤çš„ API Serverã€‚</p>
<p>ä¸ºäº†è®¿é—®æš´éœ²çš„æœåŠ¡ï¼Œå¯ä»¥æ‰‹åŠ¨ç«¯å£è½¬å‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ minikube è‡ªåŠ¨è®¿é—®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mk service echo-server</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åˆ°ä¸Šé¢ <code>echo-server</code> çš„ <code>EXTERNAL-IP</code> è¿˜åœ¨ç­‰å¾…åˆ†é…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code>mk tunnel</code> å»ºç«‹éš§é“ä»è€Œåˆ†é…å¤–éƒ¨è®¿é—®çš„ IPã€‚</p>
<p>ä¸Šè¿°ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡ Dashboard å›¾å½¢åŒ–ç•Œé¢æŸ¥çœ‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mk dashboard</span><br></pre></td></tr></table></figure>

<p>æœ‰è¶£çš„æ˜¯ï¼ŒK8s æœåŠ¡ä¹Ÿæ˜¯ç”± K8s è‡ªå·±ç®¡ç†çš„ï¼Œå®ƒè¿è¡Œåœ¨ <code>kube-system</code> çš„ Namespace ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">k get po,svc -n kube-system</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME                                   READY   STATUS    RESTARTS       AGE</span><br><span class="line">pod/coredns-78fcd69978-xlh28           1/1     Running   0              141m</span><br><span class="line">pod/etcd-minikube                      1/1     Running   0              142m</span><br><span class="line">pod/kube-apiserver-minikube            1/1     Running   0              142m</span><br><span class="line">pod/kube-controller-manager-minikube   1/1     Running   0              142m</span><br><span class="line">pod/kube-proxy-gblfw                   1/1     Running   0              141m</span><br><span class="line">pod/kube-scheduler-minikube            1/1     Running   0              142m</span><br><span class="line">pod/storage-provisioner                1/1     Running   1 (141m ago)   142m</span><br><span class="line"></span><br><span class="line">NAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE</span><br><span class="line">service/kube-dns   ClusterIP   10.96.0.10   &lt;none&gt;        53/UDP,53/TCP,9153/TCP   142m</span><br></pre></td></tr></table></figure>

<p>å¯¹äºå…¶ä»–å¹³å°ï¼Œ<code>kubectl</code> å‘½ä»¤ä¸å˜ï¼Œæ›¿æ¢ä¸Šè¿° <code>mk</code> ç›¸å…³å‘½ä»¤å³å¯ã€‚</p>
<h1 id="Service-Mesh"><a href="#Service-Mesh" class="headerlink" title="Service Mesh"></a>Service Mesh</h1><p>å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡ä¹‹é—´å¿…é¡»è¦é€šä¿¡ï¼Œå¯¼è‡´å¾®æœåŠ¡é€šä¿¡ç›¸å…³ä»£ç å’Œä¸šåŠ¡ä»£ç çš„å¼ºè€¦åˆã€‚Service Mesh æ­£æ˜¯ä¸ºäº†æŠ½ç¦»å‡ºå¾®æœåŠ¡é€šä¿¡çš„é€»è¾‘ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡ä»£ç ç¼–å†™ã€‚å®ƒåœ¨æ•°æ®é¢æ¿ä¸­é€šè¿‡ Sidecar åŠ«æŒå¾®æœåŠ¡ Pod çš„æµé‡ï¼Œä»è€Œæ¥ç®¡äº†æ•´ä¸ªç½‘ç»œé€šä¿¡çš„åŠŸèƒ½ã€‚</p>
<h2 id="Istio-å®‰è£…"><a href="#Istio-å®‰è£…" class="headerlink" title="Istio å®‰è£…"></a>Istio å®‰è£…</h2><p>Kubernetes é‡‡ç”¨ Istio ä½œä¸º Server Meshï¼Œé¦–å…ˆä¸‹è½½å¹¶å®‰è£…ï¼Œå®‰è£…å‰è®°å¾—ç»™ Docker Desktop æˆ– minikube åˆ†é… 8 - 16 G å†…å­˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://istio.io/downloadIstio | sh -</span><br><span class="line">mv istio-1.11.2/bin/istioctl /usr/<span class="built_in">local</span>/bin</span><br><span class="line">istioctl install --<span class="built_in">set</span> profile=demo -y</span><br></pre></td></tr></table></figure>

<p>ä»¤äººç—›å¿ƒçš„æ˜¯ï¼ŒIstio å®˜æ–¹ <a target="_blank" rel="noopener" href="https://github.com/istio/istio/issues/30829">å¹¶ä¸æ”¯æŒ</a>ã€ä¹Ÿ <a target="_blank" rel="noopener" href="https://github.com/istio/istio/issues/29596">ä¸æ‰“ç®—æ”¯æŒ</a>  ARM æ¶æ„ï¼Œå› æ­¤åœ¨ M1 ä¸‹å®‰è£…æ—¶ä¸èƒ½ç›´æ¥ä½¿ç”¨æœ€åä¸€è¡Œå‘½ä»¤è‡ªåŠ¨åŒ–å®‰è£…ï¼Œè€Œéœ€è¦å€ŸåŠ© <a target="_blank" rel="noopener" href="https://github.com/querycap/istio">è¿™ä¸ªç¤¾åŒºç‰ˆé•œåƒ</a>ï¼Œè‡ªå·±ç¼–å†™ Operator è¿›è¡Œå®‰è£…ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">install.istio.io/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">IstioOperator</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">istio-system</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">arm-istiocontrolplane</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hub:</span> <span class="string">docker.io/querycapistio</span></span><br><span class="line">  <span class="attr">profile:</span> <span class="string">demo</span></span><br><span class="line">  <span class="attr">components:</span></span><br><span class="line">    <span class="attr">pilot:</span></span><br><span class="line">      <span class="attr">k8s:</span> <span class="comment"># each components have to set this</span></span><br><span class="line">        <span class="attr">affinity:</span> <span class="meta">&amp;affinity</span></span><br><span class="line">          <span class="attr">nodeAffinity:</span></span><br><span class="line">            <span class="attr">preferredDuringSchedulingIgnoredDuringExecution:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="attr">preference:</span></span><br><span class="line">                  <span class="attr">matchExpressions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">beta.kubernetes.io/arch</span></span><br><span class="line">                      <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">                      <span class="attr">values:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">arm64</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">amd64</span></span><br><span class="line">                <span class="attr">weight:</span> <span class="number">2</span></span><br><span class="line">            <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span></span><br><span class="line">              <span class="attr">nodeSelectorTerms:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">matchExpressions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">beta.kubernetes.io/arch</span></span><br><span class="line">                      <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">                      <span class="attr">values:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">arm64</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">amd64</span></span><br><span class="line">    <span class="attr">egressGateways:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">istio-egressgateway</span></span><br><span class="line">        <span class="attr">k8s:</span></span><br><span class="line">          <span class="attr">affinity:</span> <span class="meta">*affinity</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ingressGateways:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">istio-ingressgateway</span></span><br><span class="line">        <span class="attr">k8s:</span></span><br><span class="line">          <span class="attr">affinity:</span> <span class="meta">*affinity</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>å°†è¿™ä¸ª Operator ä¿å­˜ä¸º <code>install-istio.yml</code>ï¼Œéšå <code>istioctl install -f ./install-istio.yml</code> å®Œæˆå®‰è£…ã€‚</p>
<h2 id="åº”ç”¨éƒ¨ç½²"><a href="#åº”ç”¨éƒ¨ç½²" class="headerlink" title="åº”ç”¨éƒ¨ç½²"></a>åº”ç”¨éƒ¨ç½²</h2><p>å®‰è£…å®Œæˆåï¼Œè®°å¾—å¼€å¯ Sidecar æ³¨å…¥æ¥åŠ«æŒæµé‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k label ns default istio-injection=enabled</span><br></pre></td></tr></table></figure>

<p>éšåå³å¯éƒ¨ç½²åº”ç”¨å¹¶æŸ¥çœ‹çŠ¶æ€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">k apply -f samples/bookinfo/platform/kube/bookinfo.yaml</span><br><span class="line">k get po</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME                              READY   STATUS    RESTARTS   AGE</span><br><span class="line">details-v1-79f774bdb9-ns6gl       2/2     Running   0          76s</span><br><span class="line">productpage-v1-6b746f74dc-qp7mg   2/2     Running   0          76s</span><br><span class="line">ratings-v1-b6994bb9-mflsk         2/2     Running   0          76s</span><br><span class="line">reviews-v1-545db77b95-24tsl       2/2     Running   0          76s</span><br><span class="line">reviews-v2-7bf8c9648f-b8bq4       2/2     Running   0          76s</span><br><span class="line">reviews-v3-84779c7bbc-hxkxg       2/2     Running   0          76s</span><br><span class="line"></span><br><span class="line">k get svc</span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">NAME          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">details       ClusterIP   10.102.117.210   &lt;none&gt;        9080/TCP   105s</span><br><span class="line">kubernetes    ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP    27m</span><br><span class="line">productpage   ClusterIP   10.101.203.214   &lt;none&gt;        9080/TCP   105s</span><br><span class="line">ratings       ClusterIP   10.105.60.88     &lt;none&gt;        9080/TCP   105s</span><br><span class="line">reviews       ClusterIP   10.100.137.99    &lt;none&gt;        9080/TCP   105s</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œæ£€æŸ¥å®é™…åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">k <span class="built_in">exec</span> <span class="string">&quot;<span class="subst">$(k get po -l app=ratings -o jsonpath=&#x27;&#123;.items[0].metadata.name&#125;&#x27;)</span>&quot;</span> -c ratings -- curl -sS productpage:9080/productpage | grep -o <span class="string">&quot;&lt;title&gt;.*&lt;/title&gt;&quot;</span></span><br><span class="line"><span class="comment"># result:</span></span><br><span class="line">&lt;title&gt;Simple Bookstore App&lt;/title&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°å‘½ä»¤çš„æ„æ€æ˜¯ï¼šåœ¨ ratings å¯¹åº”çš„ pod ä¸­çš„ ratings å®¹å™¨é‡Œè¿è¡Œ <code>curl -sS productpage:9080/productpage</code> å‘èµ·è¯·æ±‚ï¼Œå¹¶åœ¨è¿”å›çš„ html ä¸­æŸ¥æ‰¾æ ‡é¢˜ã€‚éœ€è¦è¿™ä¹ˆå¤æ‚æ˜¯å› ä¸ºæ­¤æ—¶æˆ‘ä»¬çš„æœåŠ¡è¿˜æ²¡æœ‰å¤–éƒ¨ IPï¼Œåªèƒ½åœ¨é›†ç¾¤å†…éƒ¨è®¿é—®ã€‚</p>
<h2 id="é€šè¿‡-Ingress-ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®"><a href="#é€šè¿‡-Ingress-ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®" class="headerlink" title="é€šè¿‡ Ingress ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®"></a>é€šè¿‡ Ingress ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®</h2><p>é¦–å…ˆéƒ¨ç½²å¥½è®¾ç½®äº†ç½‘å…³çš„åº”ç”¨å¹¶æ£€æŸ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k apply -f samples/bookinfo/networking/bookinfo-gateway.yaml</span><br><span class="line">istioctl analyze</span><br></pre></td></tr></table></figure>

<p>è·å–ä¸»æœºã€http2 ç«¯å£å’Œ https ç«¯å£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> INGRESS_HOST=$(k -n istio-system get svc istio-ingressgateway -o jsonpath=<span class="string">&#x27;&#123;.status.loadBalancer.ingress[0].ip&#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">export</span> INGRESS_PORT=$(k -n istio-system get svc istio-ingressgateway -o jsonpath=<span class="string">&#x27;&#123;.spec.ports[?(@.name==&quot;http2&quot;)].port&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè®¾ç½®å®Œå <code>$INGRESS_HOST</code> ä¸ºç©ºï¼Œè¯´æ˜ LoadBalancer æ­¤æ—¶çš„åœ°å€ä¸ºä¸»æœºåè€Œä¸æ˜¯ IPï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹è®¾ç½®å³å¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> INGRESS_HOST=$(k -n istio-system get svc istio-ingressgateway -o jsonpath=<span class="string">&#x27;&#123;.status.loadBalancer.ingress[0].hostname&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>éšåè®¿é—® <code>http://$INGRESS_HOST:$INGRESS_PORT</code> å³å¯ã€‚</p>
<h2 id="é€šè¿‡-Kiali-æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢"><a href="#é€šè¿‡-Kiali-æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢" class="headerlink" title="é€šè¿‡ Kiali æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢"></a>é€šè¿‡ Kiali æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢</h2><p>å®‰è£… Kialiã€Prometheusã€Grafanaã€Jarger ç­‰æ’ä»¶ï¼Œæ£€æŸ¥éƒ¨ç½²çŠ¶æ€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k apply -f samples/addons/</span><br><span class="line">k rollout status deploy kiali -n istio-system</span><br></pre></td></tr></table></figure>

<p>éšåå°±å¯ä»¥æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istioctl dashboard kiali</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™è„šæœ¬äº§ç”Ÿæµé‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100); <span class="keyword">do</span></span><br><span class="line">  curl -s -o /dev/null <span class="string">&quot;http://localhost/productpage&quot;</span>;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>æœ€åå°±å¯ä»¥çœ‹åˆ°æ•´ä¸ª Service Mesh çš„æ¶æ„ã€ä»¥åŠç½‘ç»œè¯·æ±‚æ•°æ®æµäº†ï¼Œéå¸¸æ¸…æ™°ã€‚</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>äº‘åŸç”ŸæŠ€æœ¯åŸç†</p><p><a href="https://signormercurio.me/post/CloudNative/">https://signormercurio.me/post/CloudNative/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Mercury</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-09-10</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Docker/">Docker</a><a class="link-muted mr-2" rel="tag" href="/tags/Serverless/">Serverless</a><a class="link-muted mr-2" rel="tag" href="/tags/Kubernetes/">Kubernetes</a><a class="link-muted mr-2" rel="tag" href="/tags/Service-Mesh/">Service Mesh</a><a class="link-muted mr-2" rel="tag" href="/tags/ARM/">ARM</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/post/GCP/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Google Cloud Platform åŸºç¡€</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/post/GoError/"><span class="level-item">Go Error å¤„ç†</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "RkxCznUcvfzFBgfMiMr0BAfd-gzGzoHsz",
            appKey: "sw2sEPOl4haCAXKUFYiBFMrR",
            placeholder: "Leave comments here...",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "en",
            visitor: true,
            highlight: true,
            
            
            
            
            
            requiredFields: ["nick","mail"],
        });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#å®¹å™¨"><span class="level-left"><span class="level-item">1</span><span class="level-item">å®¹å™¨</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Namespace"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Namespace</span></span></a></li><li><a class="level is-mobile" href="#Cgroups"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Cgroups</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ğŸŒ°-é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„-CPU-èµ„æº"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">ğŸŒ° é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„ CPU èµ„æº</span></span></a></li></ul></li><li><a class="level is-mobile" href="#UnionFS"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">UnionFS</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Serverless"><span class="level-left"><span class="level-item">2</span><span class="level-item">Serverless</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#FaaS"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">FaaS</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å¼¹æ€§ä¼¸ç¼©"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">å¼¹æ€§ä¼¸ç¼©</span></span></a></li><li><a class="level is-mobile" href="#å†·å¯åŠ¨"><span class="level-left"><span class="level-item">2.1.2</span><span class="level-item">å†·å¯åŠ¨</span></span></a></li><li><a class="level is-mobile" href="#è¯­è¨€æ— å…³æ€§"><span class="level-left"><span class="level-item">2.1.3</span><span class="level-item">è¯­è¨€æ— å…³æ€§</span></span></a></li><li><a class="level is-mobile" href="#æ•°æ®åº“ï¼Ÿ"><span class="level-left"><span class="level-item">2.1.4</span><span class="level-item">æ•°æ®åº“ï¼Ÿ</span></span></a></li></ul></li><li><a class="level is-mobile" href="#BaaS"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">BaaS</span></span></a></li><li><a class="level is-mobile" href="#ç¼ºç‚¹"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">ç¼ºç‚¹</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Kubernetes"><span class="level-left"><span class="level-item">3</span><span class="level-item">Kubernetes</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#æ¶æ„"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">æ¶æ„</span></span></a></li><li><a class="level is-mobile" href="#å®‰è£…"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">å®‰è£…</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å®‰è£…-K8s-é›†ç¾¤"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">å®‰è£… K8s é›†ç¾¤</span></span></a></li><li><a class="level is-mobile" href="#å®‰è£…-kubectl"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">å®‰è£… kubectl</span></span></a></li></ul></li><li><a class="level is-mobile" href="#å®è·µ"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">å®è·µ</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Service-Mesh"><span class="level-left"><span class="level-item">4</span><span class="level-item">Service Mesh</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Istio-å®‰è£…"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Istio å®‰è£…</span></span></a></li><li><a class="level is-mobile" href="#åº”ç”¨éƒ¨ç½²"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">åº”ç”¨éƒ¨ç½²</span></span></a></li><li><a class="level is-mobile" href="#é€šè¿‡-Ingress-ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">é€šè¿‡ Ingress ç½‘å…³è®©åº”ç”¨èƒ½å¤Ÿä»å¤–éƒ¨è®¿é—®</span></span></a></li><li><a class="level is-mobile" href="#é€šè¿‡-Kiali-æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">é€šè¿‡ Kiali æŸ¥çœ‹å›¾å½¢åŒ–ç•Œé¢</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-10-10T15:31:41.000Z">2021-10-10</time></p><p class="title"><a href="/post/Kubernetes/">Kubernetes ç¬”è®°</a></p><p class="categories"><a href="/categories/%E4%BA%91/">äº‘</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-25T17:44:35.000Z">2021-09-25</time></p><p class="title"><a href="/post/Dockerfile2GKE/">ä» Dockerfile åˆ° GKEï¼šå†æ¢ GitHub Actions</a></p><p class="categories"><a href="/categories/%E4%BA%91/">äº‘</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-23T09:03:42.000Z">2021-09-23</time></p><p class="title"><a href="/post/GCP/">Google Cloud Platform åŸºç¡€</a></p><p class="categories"><a href="/categories/%E4%BA%91/">äº‘</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-10T08:27:59.000Z">2021-09-10</time></p><p class="title"><a href="/post/CloudNative/">äº‘åŸç”ŸæŠ€æœ¯åŸç†</a></p><p class="categories"><a href="/categories/%E4%BA%91/">äº‘</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-08T07:50:13.000Z">2021-09-08</time></p><p class="title"><a href="/post/GoError/">Go Error å¤„ç†</a></p><p class="categories"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">ç¼–ç¨‹è¯­è¨€</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.png" alt="Lab on Mercury" height="28"></a><p class="is-size-7"><span>&copy; 2021 Mercury</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">Ã—</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>